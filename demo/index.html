<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <input id="js_file" type="file">

    <input id="js_time" type="number" value="1" placeholder="画面时间s">

    <button id="js_button">提取</button>

    <div id="js_info"></div>

    <div id="js_result"></div>

    <script src="../dist/intercept/web-capture.js"></script>

    <script>
        const fileInput = document.getElementById('js_file');
        const timeInput = document.getElementById('js_time');
        const button = document.getElementById('js_button');
        const infoDiv = document.getElementById('js_info');
        const resultDiv = document.getElementById('js_result');

        button.addEventListener('click', function () {
            const file = fileInput.files[0];
            const duration = parseInt(timeInput.value);

            if (!file) {
                infoDiv.textContent = '请选择一个视频文件';
                return;
            }

            infoDiv.textContent = '正在截取视频...';

            videoCapture.capture(file, duration, 'output.mp4', function (outputBlob) {
                const videoURL = URL.createObjectURL(outputBlob);

                const videoElement = document.createElement('video');
                videoElement.src = videoURL;
                videoElement.controls = true;

                resultDiv.innerHTML = '';
                resultDiv.appendChild(videoElement);

                infoDiv.textContent = '视频截取完成';
            });
        });
    </script>
</body>

</html>